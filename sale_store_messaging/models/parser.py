
from datetime import datetime
from BeautifulSoup import BeautifulSoup as BS

email_1 = {
    'subject': 'Return authorization notification for order # 116-7652884-5641008',
    'content': """
\n<pre>Dear Brown\'s General Auto,\r\n\r\nA customer has requested to return the item(s) listed below and the request is auto authorized as per the return policies.\r\n\r\nOrder ID: # 111-1172538-8814638\r\nItem: Chevrolet S10 Pick Up Truck 98-04 Front Grille Car Mat W/Mesh SS/XTREME Models\r\nQuantity: 1\r\nReturn reason: Wrong item was sent\r\nCustomer comments: Received grille for a Toyota car, seller mistake.  Correct box label wrong post and will send correct part because it\'s for a 2000 S10 SS not 2000 S10 ZR2.\r\n\r\nReturn Shipping Carrier:  UPS\r\nTracking ID: 1Z30033A9003203157\r\nRequest received: February 6, 2017\r\n\r\nReturn request details:\r\nhttps://sellercentral.amazon.com/gp/returns/list?searchType=rma&keywordSearch=DWkGp6PwRRMA&salesChannelFilter=sitesall&preSelectedRange=exactDates&exactFromDate=7/2/2017&exactToDate=7/2/2017&stateIds=Approved&stateIds=Approving\r\n\r\nOrder details:\r\nhttps://sellercentral.amazon.com/gp/orders-v2/details/ref=ag_orddet_cont_myo?ie=UTF8&orderID=111-1172538-8814638\r\n\r\nContact the customer about the return request:\r\nhttps://sellercentral.amazon.com/gp/orders-v2/contact?orderID=111-1172538-8814638\r\n\r\nTo learn more about managing returns, visit the Manage Returns tool in your seller account and click "Video tutorials":\r\nhttps://sellercentral.amazon.com/gp/returns\r\n\r\nSincerely,\r\n\r\nAmazon Services\r\n\r\nPlease note: This e-mail message was sent from a notification-only address that cannot accept incoming e-mail. Please do not reply to this message.\r\n\r\nWas this email helpful?\r\n https://sellercentral.amazon.com/gp/satisfaction/survey-form.html?ie=UTF8&HMDName=NotificationBusEmailHMD&customAttribute1Value=RETURN_REQUEST</pre>\n
 """
}

ebay_content_1 = """
    <html><head></head><body> <table width=\"600\"><tr><td><div id=\"preHeaderComponent\" style=\"font-family: Verdana;font-size: 10px;color: #333333;text-align: right;\">\tWe've asked the buyer to ship the item.</div></td></tr></table>\t\t<!-- Begin eBay Header --><div style=\"width:600px\"><table width=\"600\" CELLPADDING=0 CELLSPACING=-5>\t\t<tr>\t\t\t<td style=\"width:300px\">\t\t\t\t<a href=\"http://rover.ebay.com/rover/0/e12212.m1831.l3127/7?euid=8c455fa4215443eb8db7d785ba50bacf&amp;loc=http%3A%2F%2Fwww.ebay.com%3FssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A3127\"><img title=\"eBay\" src=\"http://p.ebaystatic.com/aw/pics/logos/logoEbay_x45.gif\" alt=\"eBay\" border=\"0\" height=\"45\" width=\"110\"></img></a>\t\t\t</td>\t\t</tr>\t\t<tr>\t\t\t<td colspan=2 style=\"width: 600px; align: center\">\t\t\t<table cellspacing=\"0\" cellpadding=\"1\" border=\"0\" width=\"100%\">\t\t\t\t<tr>\t\t\t\t\t<td style=\"background-color:#FF0000;height:2px;width:22%;\"></td>\t\t\t\t\t<td style=\"background-color:#990033;height:2px;width:4%;\"></td>\t\t\t\t\t<td style=\"background-color:#000099;height:2px;width:22%;\"></td>\t\t\t\t\t<td style=\"background-color:#CC6600;height:2px;width:4%;\"></td>\t\t\t\t\t<td style=\"background-color:#FFCC00;height:2px;width:22%;\"></td>\t\t\t\t\t<td style=\"background-color:#999900;height:2px;width:4%;\"></td>\t\t\t\t\t<td style=\"background-color:#99CC00;height:2px;width:22%;\"></td>\t\t\t\t</tr>\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t<img src=\"http://rover.ebay.com/roveropen/0/e12212/7?euid=8c455fa4215443eb8db7d785ba50bacf\" border=\"0\" height=\"1\" width=\"1\" />\t\t\t\t\t</td>\t\t</tr>\t\t\t\t</table></div> <table width=\"600\" cellspacing=\"0px\" cellpadding=\"0px\" style=\"border-bottom: 1px solid gray;margin-bottom:15px;\"><tr><td><div id=\"titleComponent\" style=\"width:600px;text-align:left;\"><div>\t<p style=\" color:#333333;font-family:Trebuchet MS;word-wrap:break-word;overflow:hidden;font-size:24px;margin-bottom:5px;margin-top:20px;\">\tWe've asked the buyer to ship the item</p></div></div></td></tr></table><table width=\"600\" cellspacing=\"0px\" cellpadding=\"0px\"><tr><td><div style=\"font-size:13px;color: #333333;font-family:Arial;line-height:20px;width:600px;margin-bottom:20px;word-wrap:break-word;\" id=\"para-link\">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"margin-bottom:1em\">Hi rhinorexauto,</p>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"margin-bottom:1em\">jdmcrx1872012 indicated that they shipped their return. The item should now be delivered and once you have received it please issue the buyer with a refund by February 17, 2017.</p>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"margin-bottom:1em\">When the refund is complete, you will automatically receive a credit for the final value fee and other applicable fees.</p>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<p style=\"margin-bottom:1em\">To see more information about this return you can go to the <a href=\"http://postorder.ebay.com/Return/ReturnsDetail?returnId=5046715580\">return details</a>.</p>\t\t\t\t\t\t\t\t\t\t\t\t</div> </td></tr></table> <table cellpadding=\"5\" style=\"background:#3c8ACD; display: inline-block; font-size:15px;font-family:Trebuchet MS;font-weight:bold; text-decoration: none; color:#ffffff;max-width:600px;\"><tr><td><a style=\"color:#ffffff; font-family:trebuchet MS;font-weight:bold;font-size:15px;text-decoration:none\" href=\"http://postorder.ebay.com/Return/ReturnsDetail?returnId=5046715580\"><span color=\"#ffffff\">Issue refund</span></a></td></tr></table><table><tr><td height=\"15\"></td></tr></table><table width=\"600\" cellspacing=\"0px\" cellpadding=\"0px\"><tr><td><div style=\"font-size:13px;color: #333333;font-family:Arial;line-height:20px;width:600px;margin-bottom:20px;\">                                                                                                                                                                                                                                                                                                                                                                                                                   <p>If the item hasn't arrived yet, the buyer may not be returning it. If you like, you can <a href=\"http://contact.ebay.com/ws/eBayISAPI.dll?ContactUserNextGen&amp;iId=322360084016&amp;recipient=jdmcrx1872012\">contact the buyer</a>. If you can't reach a resolution, you can <a href=\"http://postorder.ebay.com/Return/ReturnsDetail?action=escalateView&amp;returnId=5046715580\">ask us to step in</a>. <a href=\"http://pages.ebay.com/help/sell/return-process.html\">Learn more</a>.</p>                                                                                                                                                                                                                                                                        </div> </td></tr></table>\t <div id=\"itemDetailsComponent\">\t<table width=\"600\"></table>    <table width=\"600\" cellpadding=\"10\" cellspacing=\"0\" style=\"background-color:rgb(239, 239, 239);\">\t\t<tr>\t\t\t<td>  \t\t\t<table width=\"580\" cellpadding=\"10\" cellspacing=\"0\" style=\"background-color:#FFFFFF;\">\t\t\t\t\t<tr><td>\t\t<div style=\"color: rgb(51, 51, 51); font-family: trebuchet MS; font-size: 19px;\">Item Information</div>\t\t<div><table cellpadding=\"0\" cellspacing=\"0\" style=\"background-color:rgb(153, 153, 153);\"><tr><td width=\"560\" height=\"1\"></td></tr></table></div>\t\t<div><table><tr><td height=\"15\"></td></tr></table></div>\t  <div>\t\t<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\t\t\t<tr>\t\t\t\t<td width=\"98;\" valign=\"top\">\t\t\t\t\t<div style=\"border: 1px solid #cccccc;\">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<a href=\"http://rover.ebay.com/rover/0/e12212.m43.l1120/7?euid=8c455fa4215443eb8db7d785ba50bacf&loc=http%3A%2F%2Fcgi.ebay.com%2Fws%2FeBayISAPI.dll%3FViewItem%26item%3D322360084016%26ssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A1120\"><img style=\"display: block; vertical-align: top;\" width=\"98\" height=\"98\" border=\"0\" src=\"http://i.ebayimg.com/00/s/NTAwWDUwMA==/z/c0EAAOSwo4pYUhh~/$_1.JPG?set_id=8800005007;\" /></a>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t</td>\t\t\t\t<td width=\"15\"></td>\t\t\t\t<td valign=\"top\">\t\t\t\t\t<div style=\"width:440px;word-wrap: break-word;\">\t\t\t\t\t\t<a href=\"http://rover.ebay.com/rover/0/e12212.m43.l3160/7?euid=8c455fa4215443eb8db7d785ba50bacf&loc=http%3A%2F%2Fcgi.ebay.com%2Fws%2FeBayISAPI.dll%3FViewItem%26item%3D322360084016%26ssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A3160\" style=\"text-decoration:none;color:#002398; font-family: trebuchet MS; font-size: 15px; font-weight:bold;\">\t\t\t\t\t\tNew Grille for Toyota Camry 1995-1996 TO1200188</a>\t\t\t\t\t</div>\t\t\t\t\t <div>\t\t\t\t\t\t<table border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"font-family: Arial;font-size: 12px; color: #333333;\">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr valign=\"TOP\">\t\t\t\t\t\t<td style=\"padding-top:3px;\" nowrap><b>Item ID:</b></td>\t\t\t\t\t\t<td style=\"padding-top:3px;padding-left:10px;\"><b>322360084016</b></td>\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr valign=\"TOP\">\t\t\t\t\t\t<td style=\"padding-top:3px;\" nowrap><b>Return ID:</b></td>\t\t\t\t\t\t<td style=\"padding-top:3px;padding-left:10px;\"><b>5046715580</b></td>\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr valign=\"TOP\">\t\t\t\t\t\t<td style=\"padding-top:3px;\" nowrap><b>Buyer ID:</b></td>\t\t\t\t\t\t<td style=\"padding-top:3px;padding-left:10px;\"><b>jdmcrx1872012</b></td>\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr valign=\"TOP\">\t\t\t\t\t\t\t<td style=\"padding-top:3px;\" nowrap><b>Return shipping:</b></td>\t\t\t\t\t\t\t<td style=\"padding-top:3px;padding-left:10px;\"><b>buyer pays</b></td>\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div></td></tr></table></div></td></tr></table></td></tr></table><table><tr><td height=\"15\"></td></tr></table></div>\t<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\t <tbody>\t \t<tr>\t \t\t<td id=\"emailReferenceComponent\" style=\"display: inline-block;color:#333333;font-family:Arial;font-size:8pt;text-align:left;word-wrap:break-word;\t\t\t\toverflow:hidden;width:600px;\">\t\t\t    Email reference id: [#8c455fa4215443eb8db7d785ba50bacf#]\t \t\t</td>\t \t</tr>\t </tbody></table><table><tr><td height=\"4\"></td></tr></table>\t\t\t\t\t\t<table width=\"600\" cellspacing=\"0\" cellpadding=\"0\" style=\"border-top:1px dotted #cccccc;font-family:verdana; font-size:10px; color:#666666; word-wrap:break-word\">\t\t\t<tr>\t\t\t\t\t\t<td style=\"padding:20px; background:#EDEDED\">\t\t\t\t<div>\t\t\t\t\t\t<table cellspacing=\"0\" cellpadding=\"0\" style=\"font-family:verdana; font-size:10px; color:#666666; word-wrap:break-word\">\t\t\t<tr>\t\t\t<td style=\"padding-bottom: 15px;\">\t\t\teBay sent this message to Sandra Di Rezze (rhinorexauto). <a href=\"http://rover.ebay.com/rover/0/e12212.m1852.l3167/7?euid=8c455fa4215443eb8db7d785ba50bacf&amp;loc=http%3A%2F%2Fpages.ebay.com%2Fhelp%2Fconfidence%2Fname-userid-emails.html%3FssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A3167\">Learn more</a>\t\t\t</td>\t\t\t</tr>\t\t\t<tr>\t\t\t<td style=\"padding-bottom: 15px;\">\t\t\t\t\tWhy am I receiving this email?\t\t\t<div>\t\t\t\t\tYou are receiving this email based on your eBay account preferences. If you'd rather not receive these emails, click <a href=\"http://rover.ebay.com/rover/0/e12212.m1852.l1142/7?euid=8c455fa4215443eb8db7d785ba50bacf&amp;loc=http%3A%2F%2Fmy.ebay.com%2Fws%2FeBayISAPI.dll%3FEmailUnsubscribe%26emailType%3D12212%26ssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A1142\">unsubscribe</a>.\t\t\t</div>\t\t\t</td>\t\t\t</tr>\t\t\t<tr>\t\t\t<td style=\"padding-bottom: 15px;\">\t\t\teBay is committed to your privacy. Learn more about our <a href=\"http://rover.ebay.com/rover/0/e12212.m1852.l3168/7?euid=8c455fa4215443eb8db7d785ba50bacf&amp;loc=http%3A%2F%2Fpages.ebay.com%2Fhelp%2Fpolicies%2Fprivacy-policy.html%3FssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A3168\">privacy notice</a> and <a href=\"http://rover.ebay.com/rover/0/e12212.m1852.l3165/7?euid=8c455fa4215443eb8db7d785ba50bacf&amp;loc=http%3A%2F%2Fpages.ebay.com%2Fhelp%2Fpolicies%2Fuser-agreement.html%3FssPageName%3DADME%3AX%3ANTSFSEANT%3AUS%3A3165\">user agreement</a>.\t\t\t</td>\t\t\t</tr>\t\t\t<tr>\t\t\t<td>\t\t\t\t\t\t</td>\t\t\t</tr>\t\t\t\t\t\t\t\t\t<tr>\t\t\t<td>\t\t\t\u00a9 2017 eBay Inc., 2145 Hamilton Avenue, San Jose, CA 95125\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t</div>\t\t\t\t\t\t</td>\t\t\t</tr>\t\t</table></body></html>
"""

def parse_ebay_message(message):
    content = BS(message)
    user_input = content.find("div", {"id": "para-link"})
    return user_input.text

def main():
    # email = email_1
    # result = parse_email(email)
    result = parse_ebay_message(ebay_content_1)
    print result

if __name__ == "__main__":
    main()